---
import type { HTMLAttributes } from 'astro/types';


// const slotNames = Object.keys(Astro.slots);
// const renderedSlots = Object.fromEntries(await Promise.all(slotNames.map(async slot => [slot, await Astro.slots.render(slot)]))) as Record<(typeof slotNames)[number], any>;

type Props = { from?: number, till?: number }

const { from, till } = Astro.props;

const readableName = (i : number) => i.toString()
---
<style is:global>
ins, del {
  display: inline-block;
}
del.unset, ins.unset {
  text-decoration: inherit;
  background: none;
  color: inherit;
}
del, .del.del {
  text-decoration: line-through;
  background-color: #fbb;
  color: rgb(var(--gray));
}
ins, .ins.ins {
  text-decoration: inherit;
  background-color: #d4fcbc;
}
.ins .del {
  background-color: #d4fcbc;
}
.ins.del {
  text-decoration: line-through;
}
</style>
{
  till === undefined ?
    from === undefined ?
      <slot />
    :
      <ins class="ins" data-from={from} title={`added ${readableName(from)}`}>
        <slot />
      </ins>
  :
    from === undefined ?
      <del class="del" data-till={till} title={`removed ${readableName(till)}`}>
        <slot />
      </del>
    :
      <del class="ins del" data-from={from} data-till={till} title={`added ${readableName(from)}, removed ${readableName(till)}`}>
        <ins>
          <slot />
        </ins>
      </del>
}